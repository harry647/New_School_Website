<div class="glass-card p-5 text-white">
  <!-- Header -->
  <div class="text-center mb-5">
    <button onclick="history.back()" class="btn btn-outline-light mb-4">
      Back to Clubs
    </button>
    <h1>Mathematics Club</h1>
    <p class="lead text-dark fs-4">Numbers Never Lie</p>
  </div>

  <div class="row g-5">
    <!-- Left Column -->
    <div class="col-lg-4 text-center">

      <img src="/assets/images/clubs/maths.png" 
           class="club-logo shadow-lg mb-4 rounded-4" 
           alt="Mathematics Club Logo">

      <button onclick="openJoinModal('Mathematics Club')" 
              class="btn btn-success btn-lg px-5 w-100 mb-4 shadow">
        Join Math Club
      </button>

      <!-- Club Leader -->
      <div class="glass-card p-4 text-dark rounded-3 mb-4">
        <h5 class="fw-bold mb-3">Club Leader</h5>
        <div class="text-center">
          <p class="mb-1 fw-semibold">Mr. Otieno Harry</p>
          <p class="small text-muted mb-3">barunionsecondary@gmail.com</p>
          <a href="mailto:barunionsecondary@gmail.com" 
             class="btn btn-outline-primary btn-sm w-100">
            Contact Leader
          </a>
        </div>
      </div>

      <!-- Resources -->
      <div class="glass-card p-4 text-dark rounded-3">
        <h5 class="fw-bold mb-3">Download Resources</h5>
        <div class="d-grid gap-2">
          <a href="/downloads/maths/math-guide.pdf" 
             class="btn btn-outline-light btn-sm" download>
            Math Guide PDF
          </a>
          <a href="/downloads/maths/math-puzzles.pdf" 
             class="btn btn-outline-light btn-sm" download>
            Math Puzzles & Challenges
          </a>
        </div>
      </div>

    </div>

    <!-- Right Column -->
    <div class="col-lg-8">

      <!-- About -->
      <section class="mb-5">
        <h3>About Us</h3>
        <p class="lead fs-5">
          Math Olympiad, puzzles, competitions, and advanced problem-solving challenges to sharpen your skills. 
          Whether you love algebra, geometry, or pure logic — this is your place to excel and compete at national level.
        </p>
      </section>

      <!-- Gallery -->
      <section class="mb-5">
        <h3>Competition Moments</h3>
        <div class="row g-3" data-fancybox="math-gallery">
          <div class="col-6 col-md-4">
            <a href="/assets/images/gallery/maths/math1.png" data-caption="National Math Olympiad 2025">
              <img src="/assets/images/gallery/maths/math1.png" class="img-fluid rounded shadow-sm" alt="Math Olympiad">
            </a>
          </div>
          <div class="col-6 col-md-4">
            <a href="/assets/images/gallery/maths/math2.png" data-caption="Puzzle Challenge Winners">
              <img src="/assets/images/gallery/maths/math2.png" class="img-fluid rounded shadow-sm" alt="Puzzle Winners">
            </a>
          </div>
          <div class="col-6 col-md-4">
            <a href="/assets/images/gallery/maths/math3.png" data-caption="Math Quiz Competition">
              <img src="/assets/images/gallery/maths/math3.png" class="img-fluid rounded shadow-sm" alt="Quiz Competition">
            </a>
          </div>
          <!-- Add more as needed -->
        </div>
      </section>

      <!-- Upcoming Events – Auto-loaded from backend -->
      <section class="mb-5">
        <h3>Upcoming Events</h3>
        <div id="mathematicsEvents" class="row g-3" data-club-id="mathematics">
          <!-- Events injected automatically by clubs.js -->
          <div class="col-12 text-center py-5 text-muted">
            <i class="fas fa-spinner fa-spin fa-2x"></i>
            <p class="mt-3">Loading events...</p>
          </div>
        </div>
      </section>

      <!-- File Upload Zone -->
      <section class="mb-5">
        <h3>Submit Solutions, Assignments, or Puzzles</h3>
        <div class="upload-zone p-5 text-center border-2 border-dashed rounded-4 cursor-pointer"
             id="uploadZone">
          <i class="fas fa-cloud-upload-alt fa-4x mb-4 text-white opacity-75"></i>
          <p class="lead mb-4">Drag & drop files here</p>
          <p class="small opacity-80 mb-4">or click to browse</p>
          <input type="file" 
                 id="clubFileInput" 
                 multiple 
                 accept=".pdf,.doc,.docx,.jpg,.png,.mp4"
                 hidden>
          <button type="button" 
                  onclick="document.getElementById('clubFileInput').click()"
                  class="btn btn-outline-light btn-lg">
            Choose Files
          </button>

          <div id="uploadPreview" class="mt-4"></div>
        </div>
      </section>

    </div>
  </div>
</div>

<!-- Auto-load events & setup upload when page loads -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const container = document.getElementById('mathematicsEvents');
    if (!container) return;

    const clubId = 'mathematics'; // Must match club.id in clubs.json

    const loadEvents = () => {
      if (typeof window.EVENTS === 'undefined') {
        setTimeout(loadEvents, 100);
        return;
      }

      const clubEvents = window.EVENTS
        .filter(group => group.clubId === clubId)
        .flatMap(group => group.events || []);

      if (clubEvents.length === 0) {
        container.innerHTML = `
          <div class="col-12 text-center py-5">
            <p class="text-muted fs-5">No upcoming events scheduled.</p>
          </div>`;
        return;
      }

      container.innerHTML = clubEvents.map(ev => `
        <div class="col-md-6 mb-4">
          <div class="glass-card p-4 text-white h-100">
            <h5 class="fw-bold mb-2">${ev.title}</h5>
            <p class="small opacity-80 mb-2">
              ${new Date(ev.date).toLocaleDateString('en-KE', { 
                weekday: 'long', month: 'long', day: 'numeric' 
              })}
            </p>
            ${ev.time ? `<p class="small opacity-80"><i class="far fa-clock"></i> ${ev.time}</p>` : ''}
            ${ev.location ? `<p class="small opacity-80"><i class="fas fa-map-marker-alt"></i> ${ev.location}</p>` : ''}
            <p class="mt-3">${ev.description || ''}</p>
          </div>
        </div>
      `).join('');
    };

    loadEvents();
  });
</script>