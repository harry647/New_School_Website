<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>About Us | Bar Union Mixed Secondary School</title>
    <meta name="description" content="Learn about our rich history, vision, mission, values, and commitment to excellence in education." />
    <meta name="keywords" content="school, education, vision, mission, values, history, about us" />
    <meta name="author" content="Bar Union Mixed Secondary School" />
    <!-- Open Graph / Social Sharing -->
    <meta property="og:title" content="About Us | Bar Union Mixed Secondary School">
    <meta property="og:description" content="Learn about our rich history, vision, mission, values, and commitment to excellence in education.">
    <meta property="og:image" content="/assets/images/common/og-image.jpg">
    <meta property="og:url" content="https://yourschool.edu/about.html">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link rel="stylesheet" href="/css/static/about.css" />
    <!-- Favicons -->
    <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/common/apple-touch-icon.png">
</head>
<body class="page-about">
    <!-- Header -->
    <div w3-include-html="/includes/header.html"></div>

    <!-- Page Hero -->
    <section class="page-hero" role="banner" aria-label="About Us Hero">
        <div class="container">
            <h1>About Us</h1>
            <p>Building Futures with Knowledge, Character & Excellence</p>
        </div>
    </section>

    <!-- Our History -->
    <section class="section" aria-labelledby="history-title">
        <div class="container">
            <div class="about-grid">
                <div class="about-text">
                    <h2 id="history-title">Our Journey Since 1983</h2>

                    <p>
                        Bar Union Mixed Secondary School derived its name from "Bar," a Luo word meaning 'a region with plenty of grass and scattered trees.'
                        The school was established in <strong>1983</strong> and provisionally registered as a one-day school in 1984 as a union of three churches —
                        Anglican Church of Kenya, African Inland Church, and Seventh Day Adventist — under the stewardship of their church elders,
                        Mr. Daniel Ollo, Mr. Jacob Otiende, and Mr. Ibrahim Ahoya.
                    </p>
                    <p>
                        The school was named <strong>Bar Union Mixed Secondary School</strong> to reflect its founding churches and its scenic location amidst
                        abundant grass and scattered trees.
                    </p>
                    <p>
                        Since its inception, the school has undergone significant transformations in infrastructure, enrollment, staff establishment,
                        and management support. Starting as a single-streamed school in 1984, it became fully registered as a two-streamed school in 2001
                        with 320 students. By 2010, enrollment increased to 480 students, prompting registration as a four-streamed school. Currently,
                        the school serves <strong>953 students</strong>, projected to reach approximately 1000+ by 2026.
                    </p>
                    <p>
                        Leadership has been overseen by seven principals: Mr. Peter Ochuka (1983–1986), Mr. Ochieng Ogony (1987–1990), Mr. Aoro Ochieng (1991–1992),
                        Mr. Malak Akolo (1993–2003), Mrs. Roselyne Ochieng (2003–2009), Mrs. Betty A. Oyuga (2010–2023) and Mr. George Achilla (2023-Present).
                    </p>

                    <h3>Location</h3>
                    <p>
                        The school occupies 2.8 hectares in BAR "A" Sub-location, North Kisumu Location, Nyahera Division, Kisumu North Sub-county.
                        It is 6km from Kiboswa Shopping Centre and 4km from Daraja Mbili junction off Kisumu-Busia Road. Bar Union Mixed Secondary School
                        is registered with the Government of Kenya as a five-streamed County Mixed Day Public School.
                    </p>

                    <h3>Catchment Area</h3>
                    <p>
                        Bar Union is situated in a competitive educational region, surrounded by 10 other mixed day schools within a 5km radius.
                    </p>

                    <h3>Population & Streams</h3>
                    <p>
                        Currently, the school enrolls 953 students (471 boys and 480 girls) across six streams: Green, White, Red, Orange, Yellow and Blue.
                        Only Form One has operationalized the seventh stream (Purple) at the moment. Expansion of the seventh stream to Forms Two, Three,
                        and eventually Form Four is expected by 2027.
                    </p>

                    <h3>Staff</h3>
                    <p>
                        The school has 41 teachers (26 TSC, 15 BOM) — 18 males and 23 females — against a curriculum establishment of approximately 50 teachers.
                        Support staff numbers 10 (6 males, 4 females).
                    </p>

                    <!-- Stats Section with Dynamic Counters -->
                    <div class="stats">
                        <div class="stat counter" data-target="41">
                            <h3>41</h3>
                            <p>Years of Excellence</p>
                        </div>
                        <div class="stat counter" data-target="953">
                            <h3>953</h3>
                            <p>Current Students</p>
                        </div>
                        <div class="stat counter" data-target="1000">
                            <h3>1000+</h3>
                            <p>Projected by 2026</p>
                        </div>
                        <div class="stat counter" data-target="7">
                            <h3>7</h3>
                            <p>Principals Since 1983</p>
                        </div>
                    </div>

                    <!-- Enrollment Growth Timeline -->
                    <div class="timeline">
                        <h4>Enrollment Growth Over the Years</h4>
                        <ul>
                            <li><strong>1984:</strong> 50 students (1 stream)</li>
                            <li><strong>2001:</strong> 320 students (2 streams)</li>
                            <li><strong>2010:</strong> 480 students (4 streams)</li>
                             <li><strong>2010-2025:</strong> 600+ students (5 streams)</li>
                            <li><strong>2026:</strong> Projected 1000+ students (7 streams)</li>
                        </ul>
                    </div>

                    <!-- Growth Chart -->
                    <div class="chart-container">
                        <canvas id="growthChart"></canvas>
                    </div>
                </div>

                <!-- Historical Image -->
                <div class="about-image">
                    <img src="/assets/images/common/about-history1.png" alt="Historical photo of Bar Union Mixed Secondary School and students over the decades">
                </div>
            </div>
        </div>
    </section>

    <!-- Vision, Mission, Motto & Philosophy -->
    <section class="section bg-light" aria-labelledby="vm-title">
        <div class="container">
            <div class="section-title">
                <h2 id="vm-title">Vision, Mission, Motto & Philosophy</h2>
            </div>

            <!-- Fixed: Added wrapper + proper class for animation -->
            <div class="vision-mission">
                <div class="vm-card">
                    <div class="icon"><i class="fas fa-eye fa-3x" aria-hidden="true"></i></div>
                    <h3>Our Vision</h3>
                    <p>To be a model school</p>
                </div>
                <div class="vm-card">
                    <div class="icon"><i class="fas fa-compass fa-3x" aria-hidden="true"></i></div>
                    <h3>Our Mission</h3>
                    <p>Moulding holistic citizens for self and national development</p>
                </div>
                <div class="vm-card">
                    <div class="icon"><i class="fas fa-flag fa-3x" aria-hidden="true"></i></div>
                    <h3>Our Motto</h3>
                    <p>Forward ever</p>
                </div>
                <div class="vm-card">
                    <div class="icon"><i class="fas fa-lightbulb fa-3x" aria-hidden="true"></i></div>
                    <h3>Our Philosophy</h3>
                    <p>
                        Bar Union Mixed Secondary School regards all students and staff as equal and gives equal opportunity
                        to all to learn and work regardless of their tribe, sex, race, religion, economic background, or political affiliations.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Core Values -->
    <section class="section" aria-labelledby="values-title">
        <div class="container">
            <div class="section-title">
                <h2 id="values-title">Our Core Values</h2>
                <p>The principles that guide everything we do</p>
            </div>
            <div class="values-grid">
                <div class="value-card"><i class="fas fa-pray fa-3x" aria-hidden="true"></i><h4>Godliness</h4><p>We are committed to providing spiritual nourishment alongside curriculum delivery and implementation.</p></div>
                <div class="value-card"><i class="fas fa-smile fa-3x" aria-hidden="true"></i><h4>Self-esteem</h4><p>We are committed to building confidence in our students and instilling the drive to achieve.</p></div>
                <div class="value-card"><i class="fas fa-handshake fa-3x" aria-hidden="true"></i><h4>Integrity</h4><p>We are committed to acting in an honest, accountable, and transparent manner in all our undertakings.</p></div>
                <div class="value-card"><i class="fas fa-chalkboard-teacher fa-3x" aria-hidden="true"></i><h4>Professionalism</h4><p>We are dedicated to achieving high levels of performance through competence and pertinent skills.</p></div>
                <div class="value-card"><i class="fas fa-users-cog fa-3x" aria-hidden="true"></i><h4>Teamwork</h4><p>We embrace collaboration within the school and with all stakeholders and partners in achieving our mandates.</p></div>
                <div class="value-card"><i class="fas fa-handshake-alt fa-3x" aria-hidden="true"></i><h4>Courtesy</h4><p>We endeavor to be courteous to all our colleagues and stakeholders at all times.</p></div>
                <div class="value-card"><i class="fas fa-bolt fa-3x" aria-hidden="true"></i><h4>Efficiency</h4><p>We strive to achieve the highest value from resources, particularly for the benefit of students.</p></div>
                <div class="value-card"><i class="fas fa-balance-scale fa-3x" aria-hidden="true"></i><h4>Equity</h4><p>We ensure that education is provided to all, including those with special needs.</p></div>
            </div>
        </div>
    </section>

    <!-- Principal's Message with Photo on Right -->
    <section class="section bg-light" aria-labelledby="principal-title">
        <div class="container">
            <div class="section-title">
                <h2 id="principal-title">Message from the Principal</h2>
            </div>

            <div class="principal-message-grid">
                <!-- Message Content -->
                <div class="message-content">
                    <blockquote cite="#">
                        “Since its establishment in <strong>1983</strong>, Bar Union Mixed Secondary School has grown from a modest single-streamed school
                        into a thriving six-streamed institution serving over <strong>953 students</strong>. Our journey has been guided by a steadfast commitment
                        to academic excellence, holistic development, and the cultivation of values that shape responsible, ethical, and confident citizens.
                    </blockquote>
                    <blockquote cite="#">
                        At Bar Union, education goes beyond books and exams — it is about nurturing character, creativity, leadership, and a sense of social responsibility.
                        We strive to provide an inclusive environment where every student, regardless of their background, has the opportunity to realize their full potential.
                    </blockquote>
                    <blockquote cite="#">
                        Our vision to be a model school, guided by our motto <strong>‘Forward Ever’</strong>, is reflected in our dedication to Godliness, Self-esteem, Integrity,
                        Professionalism, Teamwork, Courtesy, Efficiency, and Equity. These core values are embedded in every aspect of school life, ensuring that our students
                        graduate as well-rounded, morally upright, and capable leaders ready to contribute meaningfully to society.
                    </blockquote>
                    <blockquote cite="#">
                        I am proud of our passionate faculty, committed support staff, and our vibrant student community. Together, we continue to build on our rich history,
                        expand our streams and facilities, and embrace innovations that enhance learning. I warmly welcome parents, guardians, and stakeholders to join us
                        in shaping the future of Bar Union Mixed Secondary School.”
                    </blockquote>

                    <div class="signature">
                        <strong>Mr. George Achilla</strong><br>
                        <span>Principal & Director</span>
                    </div>
                </div>

                <!-- Principal Photo + Mini Timeline -->
                <div class="principal-sidebar">
                    <div class="principal-photo">
                        <img src="/assets/images/admin/principal.jpg" alt="Mr. George Achilla - Principal, Bar Union Mixed Secondary School" loading="lazy">
                    </div>
                    <div class="principal-timeline">
                        <h3>Our Journey at a Glance</h3>
                        <ul>
                            <li><strong>1983:</strong> School established as Bar Union Mixed Secondary School.</li>
                            <li><strong>1984:</strong> Provisionally registered as a one-day school; single stream with 50 students.</li>
                            <li><strong>2001:</strong> Fully registered as a two-streamed school with 320 students.</li>
                            <li><strong>2010:</strong> Registered as a four-streamed school with 480 students.</li>
                            <li><strong>2025:</strong> Current enrollment at 953 students, projected to reach 1000+ students.</li>
                            <li><strong>Leadership:</strong> Seven principals have led the school, fostering growth, academic excellence, and holistic education.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact & Feedback Section -->
    <section class="section contact-feedback-section" aria-labelledby="contact-title">
        <div class="container">
            <div class="section-title">
                <h2 id="contact-title">Get in Touch</h2>
                <p>Have questions about our school? We'd love to hear from you. Send us a message and we'll respond as soon as possible.</p>
            </div>

            <div class="contact-feedback-grid">
                <!-- Contact Form -->
                <div class="contact-form-container">
                    <h3>Contact Us</h3>
                    <form id="contactForm" class="contact-form" novalidate>
                        <div class="form-group">
                            <label for="contactName">Full Name *</label>
                            <input type="text" id="contactName" name="name" required aria-describedby="contactName-error">
                            <span class="error-message" id="contactName-error" role="alert"></span>
                        </div>

                        <div class="form-group">
                            <label for="contactEmail">Email Address *</label>
                            <input type="email" id="contactEmail" name="_replyto" required aria-describedby="contactEmail-error">
                            <span class="error-message" id="contactEmail-error" role="alert"></span>
                        </div>

                        <div class="form-group">
                            <label for="contactPhone">Phone Number</label>
                            <input type="tel" id="contactPhone" name="phone" aria-describedby="contactPhone-error">
                            <span class="error-message" id="contactPhone-error" role="alert"></span>
                        </div>

                        <div class="form-group">
                            <label for="contactSubject">Subject *</label>
                            <select id="contactSubject" name="subject" required aria-describedby="contactSubject-error">
                                <option value="">Select a subject</option>
                                <option value="admissions">Admissions Information</option>
                                <option value="academics">Academic Programs</option>
                                <option value="fees">School Fees & Payments</option>
                                <option value="activities">Co-curricular Activities</option>
                                <option value="transport">Transport & Facilities</option>
                                <option value="general">General Inquiry</option>
                            </select>
                            <span class="error-message" id="contactSubject-error" role="alert"></span>
                        </div>

                        <div class="form-group">
                            <label for="contactDepartment">Department</label>
                            <select id="contactDepartment" name="department">
                                <option value="General">General</option>
                                <option value="Admissions">Admissions</option>
                                <option value="Academic">Academic Affairs</option>
                                <option value="Student Affairs">Student Affairs</option>
                                <option value="Finance">Finance</option>
                                <option value="Administration">Administration</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="contactMessage">Message *</label>
                            <textarea id="contactMessage" name="message" rows="5" required aria-describedby="contactMessage-error" placeholder="Please describe your inquiry in detail..."></textarea>
                            <span class="error-message" id="contactMessage-error" role="alert"></span>
                        </div>

                        <div class="form-group">
                            <label for="contactFollowup">Preferred Contact Method</label>
                            <select id="contactFollowup" name="followup">
                                <option value="No preference">No preference</option>
                                <option value="Email">Email</option>
                                <option value="Phone">Phone call</option>
                                <option value="SMS">SMS</option>
                            </select>
                        </div>

                        <button type="submit" class="submit-btn" id="contactSubmitBtn">
                            <span class="btn-text">Send Message</span>
                            <span class="btn-loading" style="display: none;">
                                <i class="fas fa-spinner fa-spin"></i> Sending...
                            </span>
                        </button>

                        <div class="form-status" id="contactFormStatus" role="alert" aria-live="polite"></div>
                    </form>
                </div>

                <!-- Feedback Form -->
                <div class="feedback-form-container">
                    <h3>Share Your Feedback</h3>
                    <p>Help us improve by sharing your thoughts about our school and programs.</p>
                    
                    <form id="feedbackForm" class="feedback-form" novalidate>
                        <div class="form-group">
                            <label for="feedbackEmail">Email Address *</label>
                            <input type="email" id="feedbackEmail" name="email" required aria-describedby="feedbackEmail-error">
                            <span class="error-message" id="feedbackEmail-error" role="alert"></span>
                        </div>

                        <div class="form-group">
                            <label for="feedbackCategory">Feedback Category *</label>
                            <select id="feedbackCategory" name="category" required aria-describedby="feedbackCategory-error">
                                <option value="">Select category</option>
                                <option value="school facilities">School Facilities</option>
                                <option value="academic programs">Academic Programs</option>
                                <option value="teaching quality">Teaching Quality</option>
                                <option value="student services">Student Services</option>
                                <option value="school culture">School Culture</option>
                                <option value="communication">Communication</option>
                                <option value="overall experience">Overall Experience</option>
                            </select>
                            <span class="error-message" id="feedbackCategory-error" role="alert"></span>
                        </div>

                        <div class="form-group">
                            <label for="feedbackRating">Rating *</label>
                            <div class="rating-container" role="radiogroup" aria-labelledby="feedbackRating-label">
                                <span id="feedbackRating-label" class="sr-only">Rate your experience</span>
                                <input type="radio" id="rating5" name="rating" value="5" required>
                                <label for="rating5" aria-label="5 stars"><i class="fas fa-star"></i></label>
                                
                                <input type="radio" id="rating4" name="rating" value="4" required>
                                <label for="rating4" aria-label="4 stars"><i class="fas fa-star"></i></label>
                                
                                <input type="radio" id="rating3" name="rating" value="3" required>
                                <label for="rating3" aria-label="3 stars"><i class="fas fa-star"></i></label>
                                
                                <input type="radio" id="rating2" name="rating" value="2" required>
                                <label for="rating2" aria-label="2 stars"><i class="fas fa-star"></i></label>
                                
                                <input type="radio" id="rating1" name="rating" value="1" required>
                                <label for="rating1" aria-label="1 star"><i class="fas fa-star"></i></label>
                            </div>
                            <span class="error-message" id="feedbackRating-error" role="alert"></span>
                        </div>

                        <div class="form-group">
                            <label for="feedbackContent">Your Feedback *</label>
                            <textarea id="feedbackContent" name="feedback" rows="4" required aria-describedby="feedbackContent-error" placeholder="Tell us about your experience..."></textarea>
                            <span class="error-message" id="feedbackContent-error" role="alert"></span>
                        </div>

                        <div class="form-group">
                            <label for="feedbackSuggestions">Suggestions for Improvement</label>
                            <textarea id="feedbackSuggestions" name="suggestions" rows="3" placeholder="How can we do better? (Optional)"></textarea>
                        </div>

                        <button type="submit" class="submit-btn secondary" id="feedbackSubmitBtn">
                            <span class="btn-text">Submit Feedback</span>
                            <span class="btn-loading" style="display: none;">
                                <i class="fas fa-spinner fa-spin"></i> Submitting...
                            </span>
                        </button>

                        <div class="form-status" id="feedbackFormStatus" role="alert" aria-live="polite"></div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <div w3-include-html="/includes/footer.html"></div>

    <!-- Scripts – Order matters! -->
    <script src="https://www.w3schools.com/lib/w3.js"></script>
    <script>w3.includeHTML();</script>

    <!-- AOS Animation Library (if you use it) -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>AOS.init();</script>

    <!-- Our Mobile Menu – This makes the hamburger work -->
    <script src="/js/static/mobile-menu.js"></script>

    <!-- Preloader hide (optional but nice) -->
    <script>
        window.addEventListener('load', function () {
            document.getElementById('preloader').style.display = 'none';
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/js/static/about.js"></script>
    
    <!-- Contact & Feedback Forms JavaScript -->
    <script>
        /**
         * About Page Contact & Feedback Forms
         * Professional form handling with fetch API integration
         */
        (function() {
            'use strict';
            
            // API Configuration
            const API_BASE = '/api';
            
            // Utility Functions
            const utils = {
                // Show form status message
                showStatus(formId, message, type = 'success') {
                    const statusEl = document.getElementById(`${formId}Status`);
                    if (statusEl) {
                        statusEl.textContent = message;
                        statusEl.className = `form-status ${type} show`;
                        
                        // Auto-hide after 5 seconds for success messages
                        if (type === 'success') {
                            setTimeout(() => {
                                statusEl.classList.remove('show');
                            }, 5000);
                        }
                    }
                },
                
                // Hide form status
                hideStatus(formId) {
                    const statusEl = document.getElementById(`${formId}Status`);
                    if (statusEl) {
                        statusEl.classList.remove('show');
                    }
                },
                
                // Show/hide loading state
                setLoading(formId, isLoading) {
                    const submitBtn = document.getElementById(`${formId}SubmitBtn`);
                    if (submitBtn) {
                        const btnText = submitBtn.querySelector('.btn-text');
                        const btnLoading = submitBtn.querySelector('.btn-loading');
                        
                        if (isLoading) {
                            submitBtn.disabled = true;
                            btnText.style.display = 'none';
                            btnLoading.style.display = 'inline-flex';
                        } else {
                            submitBtn.disabled = false;
                            btnText.style.display = 'inline';
                            btnLoading.style.display = 'none';
                        }
                    }
                },
                
                // Validate email format
                validateEmail(email) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    return emailRegex.test(email);
                },
                
                // Validate phone number (Kenyan format)
                validatePhone(phone) {
                    if (!phone) return true; // Optional field
                    const phoneRegex = /^(\+254|0)[71]\d{8}$/;
                    return phoneRegex.test(phone.replace(/\s/g, ''));
                },
                
                // Clear form errors
                clearErrors(formId) {
                    const form = document.getElementById(`${formId}Form`);
                    if (form) {
                        const errorElements = form.querySelectorAll('.error');
                        const errorMessages = form.querySelectorAll('.error-message');
                        
                        errorElements.forEach(el => el.classList.remove('error'));
                        errorMessages.forEach(el => el.classList.remove('show'));
                    }
                },
                
                // Show field error
                showFieldError(fieldId, message) {
                    const field = document.getElementById(fieldId);
                    const errorEl = document.getElementById(`${fieldId}-error`);
                    
                    if (field) field.classList.add('error');
                    if (errorEl) {
                        errorEl.textContent = message;
                        errorEl.classList.add('show');
                    }
                },
                
                // Sanitize form data
                sanitizeFormData(formData) {
                    const sanitized = {};
                    for (let [key, value] of formData.entries()) {
                        sanitized[key] = typeof value === 'string' ? value.trim() : value;
                    }
                    return sanitized;
                }
            };
            
            // Contact Form Handler
            class ContactFormHandler {
                constructor() {
                    this.formId = 'contact';
                    this.init();
                }
                
                init() {
                    const form = document.getElementById('contactForm');
                    if (!form) return;
                    
                    form.addEventListener('submit', this.handleSubmit.bind(this));
                    
                    // Real-time validation
                    const emailField = document.getElementById('contactEmail');
                    const phoneField = document.getElementById('contactPhone');
                    
                    if (emailField) {
                        emailField.addEventListener('blur', () => this.validateEmail(emailField));
                    }
                    
                    if (phoneField) {
                        phoneField.addEventListener('blur', () => this.validatePhone(phoneField));
                    }
                }
                
                validateEmail(field) {
                    const email = field.value.trim();
                    if (email && !utils.validateEmail(email)) {
                        utils.showFieldError('contactEmail', 'Please enter a valid email address');
                        return false;
                    }
                    return true;
                }
                
                validatePhone(field) {
                    const phone = field.value.trim();
                    if (phone && !utils.validatePhone(phone)) {
                        utils.showFieldError('contactPhone', 'Please enter a valid Kenyan phone number (e.g., 0712345678)');
                        return false;
                    }
                    return true;
                }
                
                validateForm(formData) {
                    utils.clearErrors(this.formId);
                    let isValid = true;
                    
                    // Required fields validation
                    const requiredFields = [
                        { id: 'contactName', name: 'Full Name' },
                        { id: 'contactEmail', name: 'Email Address' },
                        { id: 'contactSubject', name: 'Subject' },
                        { id: 'contactMessage', name: 'Message' }
                    ];
                    
                    requiredFields.forEach(field => {
                        const value = formData.get(field.id);
                        if (!value || !value.trim()) {
                            utils.showFieldError(field.id, `${field.name} is required`);
                            isValid = false;
                        }
                    });
                    
                    // Email validation
                    const email = formData.get('contactEmail');
                    if (email && !utils.validateEmail(email)) {
                        utils.showFieldError('contactEmail', 'Please enter a valid email address');
                        isValid = false;
                    }
                    
                    // Phone validation (optional but if provided, must be valid)
                    const phone = formData.get('contactPhone');
                    if (phone && !utils.validatePhone(phone)) {
                        utils.showFieldError('contactPhone', 'Please enter a valid Kenyan phone number');
                        isValid = false;
                    }
                    
                    return isValid;
                }
                
                async handleSubmit(event) {
                    event.preventDefault();
                    
                    const form = event.target;
                    const formData = new FormData(form);
                    const sanitizedData = utils.sanitizeFormData(formData);
                    
                    // Validate form
                    if (!this.validateForm(formData)) {
                        utils.showStatus(this.formId, 'Please correct the errors above', 'error');
                        return;
                    }
                    
                    // Show loading state
                    utils.setLoading(this.formId, true);
                    utils.hideStatus(this.formId);
                    
                    try {
                        const response = await fetch(`${API_BASE}/contact`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(sanitizedData)
                        });
                        
                        const result = await response.json();
                        
                        if (response.ok && result.success) {
                            utils.showStatus(this.formId, result.message || 'Message sent successfully! We\'ll get back to you soon.', 'success');
                            form.reset();
                        } else {
                            throw new Error(result.message || 'Failed to send message');
                        }
                        
                    } catch (error) {
                        console.error('Contact form error:', error);
                        utils.showStatus(this.formId, 'Sorry, there was an error sending your message. Please try again or contact us directly.', 'error');
                    } finally {
                        utils.setLoading(this.formId, false);
                    }
                }
            }
            
            // Feedback Form Handler
            class FeedbackFormHandler {
                constructor() {
                    this.formId = 'feedback';
                    this.init();
                }
                
                init() {
                    const form = document.getElementById('feedbackForm');
                    if (!form) return;
                    
                    form.addEventListener('submit', this.handleSubmit.bind(this));
                    
                    // Rating interaction
                    this.initRatingSystem();
                    
                    // Real-time validation
                    const emailField = document.getElementById('feedbackEmail');
                    if (emailField) {
                        emailField.addEventListener('blur', () => this.validateEmail(emailField));
                    }
                }
                
                initRatingSystem() {
                    const ratingContainer = document.querySelector('.rating-container');
                    if (!ratingContainer) return;
                    
                    const stars = ratingContainer.querySelectorAll('label');
                    stars.forEach((star, index) => {
                        star.addEventListener('click', () => {
                            this.updateRatingDisplay(stars.length - index);
                        });
                        
                        star.addEventListener('mouseenter', () => {
                            this.highlightStars(stars, stars.length - index);
                        });
                    });
                    
                    ratingContainer.addEventListener('mouseleave', () => {
                        const checkedRating = ratingContainer.querySelector('input[type="radio"]:checked');
                        if (checkedRating) {
                            this.updateRatingDisplay(parseInt(checkedRating.value));
                        } else {
                            this.clearStarHighlights(stars);
                        }
                    });
                }
                
                updateRatingDisplay(rating) {
                    const ratingLabel = document.getElementById('feedbackRating-label');
                    if (ratingLabel) {
                        const ratingText = ['', 'Poor', 'Fair', 'Good', 'Very Good', 'Excellent'][rating] || '';
                        ratingLabel.textContent = `Rate your experience: ${rating} star${rating !== 1 ? 's' : ''} (${ratingText})`;
                    }
                }
                
                highlightStars(stars, rating) {
                    stars.forEach((star, index) => {
                        if (index >= stars.length - rating) {
                            star.style.color = 'var(--accent-gold)';
                        } else {
                            star.style.color = 'var(--neutral-300)';
                        }
                    });
                }
                
                clearStarHighlights(stars) {
                    const checkedRating = document.querySelector('input[name="rating"]:checked');
                    if (checkedRating) {
                        this.updateRatingDisplay(parseInt(checkedRating.value));
                    } else {
                        stars.forEach(star => {
                            star.style.color = 'var(--neutral-300)';
                        });
                    }
                }
                
                validateEmail(field) {
                    const email = field.value.trim();
                    if (email && !utils.validateEmail(email)) {
                        utils.showFieldError('feedbackEmail', 'Please enter a valid email address');
                        return false;
                    }
                    return true;
                }
                
                validateForm(formData) {
                    utils.clearErrors(this.formId);
                    let isValid = true;
                    
                    // Required fields validation
                    const requiredFields = [
                        { id: 'feedbackEmail', name: 'Email Address' },
                        { id: 'feedbackCategory', name: 'Feedback Category' },
                        { id: 'feedbackContent', name: 'Your Feedback' }
                    ];
                    
                    requiredFields.forEach(field => {
                        const value = formData.get(field.id);
                        if (!value || !value.trim()) {
                            utils.showFieldError(field.id, `${field.name} is required`);
                            isValid = false;
                        }
                    });
                    
                    // Rating validation
                    const rating = formData.get('rating');
                    if (!rating) {
                        utils.showFieldError('feedbackRating-error', 'Please select a rating');
                        isValid = false;
                    }
                    
                    // Email validation
                    const email = formData.get('feedbackEmail');
                    if (email && !utils.validateEmail(email)) {
                        utils.showFieldError('feedbackEmail', 'Please enter a valid email address');
                        isValid = false;
                    }
                    
                    return isValid;
                }
                
                async handleSubmit(event) {
                    event.preventDefault();
                    
                    const form = event.target;
                    const formData = new FormData(form);
                    const sanitizedData = utils.sanitizeFormData(formData);
                    
                    // Validate form
                    if (!this.validateForm(formData)) {
                        utils.showStatus(this.formId, 'Please correct the errors above', 'error');
                        return;
                    }
                    
                    // Show loading state
                    utils.setLoading(this.formId, true);
                    utils.hideStatus(this.formId);
                    
                    try {
                        const response = await fetch(`${API_BASE}/elearning/feedback`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(sanitizedData)
                        });
                        
                        const result = await response.json();
                        
                        if (response.ok && result.success) {
                            utils.showStatus(this.formId, result.message || 'Thank you for your feedback! We appreciate your input.', 'success');
                            form.reset();
                            // Clear rating display
                            this.clearStarHighlights(document.querySelectorAll('.rating-container label'));
                            this.updateRatingDisplay(0);
                        } else {
                            throw new Error(result.message || 'Failed to submit feedback');
                        }
                        
                    } catch (error) {
                        console.error('Feedback form error:', error);
                        utils.showStatus(this.formId, 'Sorry, there was an error submitting your feedback. Please try again.', 'error');
                    } finally {
                        utils.setLoading(this.formId, false);
                    }
                }
            }
            
            // Initialize forms when DOM is ready
            function init() {
                new ContactFormHandler();
                new FeedbackFormHandler();
                
                console.log('About page contact and feedback forms initialized');
            }
            
            // Wait for DOM to be ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
            } else {
                init();
            }
        })();
    </script>
</body>
</html>